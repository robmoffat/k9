<svg:svg xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.kite9.org/schema/adl'>
  <svg:defs>

    <svg:script type="module">
      import "../scripts/navigable.js";
      import "../scripts/hoverable.js";
      import "../scripts/selectable.js";
      import "../scripts/commands/context-menu.js";
      import "../scripts/commands/delete/delete.js";
      import "../scripts/commands/edit/edit.js";
      import "../scripts/commands/palette/palette.js";
    </svg:script>

    <svg:marker id="arrow-end-marker" markerWidth="7" markerHeight="7" refX="6" refY="4" orient="auto">
      <svg:path d="M2,2 L6,4 L2,6" class="kie9-back"></svg:path>
    </svg:marker>

    <svg:marker id="arrow-start-marker" markerWidth="7" markerHeight="7" refX="2" refY="4" orient="auto">
      <svg:path d="M6,2 L2,4 L6,6" class="kite9-back"></svg:path>
    </svg:marker>

    <svg:filter id="feather" x="-1%" y="-100%" width="102%" height="300%">
        <svg:feMorphology result="offset" in="SourceGraphic" operator="dilate" radius="6"/>
        <svg:feColorMatrix result="drop" in="offset" type="matrix"
                       values="1 1 1 1 1
                               1 1 1 1 1
                               0 0 0 0 0
                               0 0 0 1 0" />
        <svg:feBlend in="SourceGraphic" in2="drop" mode="normal" />
    </svg:filter>
  </svg:defs>

  <template id="diagram">
    <back style='kite9-usage: decal; kite9-type: svg; '>
      <svg:rect x='0' y='0' width='#{$width}' height='#{$height}' style='fill: white; ' />
    </back>
    <contents />
  </template>

  <template id='box'>
    <back style='kite9-usage: decal; kite9-type: svg;  '>
      <svg:rect x='0' y='0' width='#{$width}' height='#{$height}' rx='12pt' ry='12pt' />
    </back>
    <contents />
  </template>

  <template id="button" a="b">
    <back style='kite9-usage: decal; kite9-type: svg; '>
      <svg:rect x='0' y='0' width='#{$width}' height='#{$height}' rx='8' ry='8' />
    </back>
    <contents />
  </template>

  <template id="field" name="#{../@name}">
    <back style='kite9-usage: decal; kite9-type: svg; '>
      <svg:rect x='0' y='0' width='#{$width}' height='#{$height}' />
    </back>
    <contents />
  </template>

  <template id="link">
    <contents />
    <line style="kite9-type: svg; kite9-usage: decal;">
      <svg:path d="#{$path}" class="link" style="marker-start: #{$markerstart}; marker-end: #{$markerend}" filter="url(#feather)" />
    </line>
  </template>

  <template id='terminator'>
    <svg:rect x='0' y='0' width='#{$width}' height='#{$height}' filter="url(#feather)" class="kite9-back terminator" />
  </template>



</svg:svg>